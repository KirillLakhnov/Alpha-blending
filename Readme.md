# Оптимизация алгоритма альфа-блендинга
## О ПРОЕКТЕ

**Alpha Blending** - это процесс комбинирования двух изображений на экране с учётом их альфа-каналов. Альфа-канал характеризует прозрачность изображения. В данной работе мы будем накладывать одно изображение на другое.

## Алгоритм альфа-блендинга

Этот алгоритм широко используется для объединения изображений. Есть два снимка: задний и передний. Второй должен быть наложен на первый. 

### Пример работы алгоритма:
![Rezult](readme_files/AlphaBlendingPicture.png)

Чтобы объединить изображения одинакового размера, мы используем алгоритм, который берет каждый пиксель обоих изображений (массивы спереди и сзади) и вычисляет пиксели результирующего изображения (массив экрана) с помощью простых инструментов:

``color = (front_color * front_alpha + back_color * (255 - front_alpha) >> 8)``

### Код неоптимизированного алгоритма
```С++
for (int i = 0; i < n_pixels; i++)
{
    sf::Color front_color = Front[i];
    sf::Color back_color = Back[i];
    sf::Uint8 a = front_color.a;

    Screen[i].r = ((sf::Uint8)(((front_color.r) * a + back_color.r * (255 - a)) >> 8));
    Screen[i].g = ((sf::Uint8)(((front_color.g) * a + back_color.g * (255 - a)) >> 8));
    Screen[i].b = ((sf::Uint8)(((front_color.b) * a + back_color.b * (255 - a)) >> 8));
    Screen[i].a = ((sf::Uint8)(((front_color.a) * a + back_color.a * (255 - a)) >> 8));
}
```

Производительность алгоритма без оптимизаций пропорциональна размеру изображения.

## Принципы оптимизации

## Результаты оптимизаций

В таблице ниже приведены значения FPS, измеренные для различных режимов оптимизации:

|Оптимизаиция \ Флаг|НЕТ |-O0 |-O1 |-O2 |-O3 |-Ofast |
|:------------------|:--:|:--:|:--:|:--:|:--:|:-----:|
|БЕЗ оптимизаций    | | | | | |    |
|                   |    |    |    |    |    |       |
|SSE инструкции     | | | | | |    |
|                   |    |    |    |    |    |       |
|AVX инструкции     | | | | | |    |

## Вывод
Оптимизация алгоритма рисования множества Мандельброта с использованием инстукций AVX512 позволяет его ускорить в **12.1/2.2 = 5.5** раз

